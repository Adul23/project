<section *ngIf="error" class="alert error">{{ error }}</section>
<section *ngIf="success" class="alert success">{{ success }}</section>

<main class="forms-container">
  <!-- Add Expense Form -->
  <div class="form-box">
    <h2>Add New Expense</h2>
    <form (ngSubmit)="onSubmit()">
      <label for="amount">Amount</label>
      <input
        id="amount"
        type="number"
        [(ngModel)]="amount"
        name="amount"
        placeholder="e.g., 3.50"
        required
      />

      <label for="description">Expense Name</label>
      <input
        id="description"
        type="text"
        [(ngModel)]="description"
        name="description"
        placeholder="e.g., Coffee"
        required
      />

      <label for="category">Category</label>
      <select id="category" [(ngModel)]="category" name="category" required>
        <option *ngFor="let cat of categories" [value]="cat.id">
          {{ cat.name }}
        </option>
      </select>

      <label for="currency">Currency</label>
      <select id="currency" [(ngModel)]="currency" name="currency" required>
        <option *ngFor="let cur of currencies" [value]="cur.id">
          {{ cur.code }} - {{ cur.name }}
        </option>
      </select>

      <button class="create-btn" type="submit">Add Expense</button>
    </form>
  </div>

  <!-- Expenses List -->
  <div class="form-box">
    <h2>Expenses</h2>
    <ul class="expense-list">
      <li *ngFor="let expense of expenses">
        <span class="expense-item">
          <strong>{{ expense.amount }}</strong> â€“ {{ expense.description }}
        </span>
        <button class="delete-user" (click)="removeExpense(expense.id)">
          Remove
        </button>
      </li>
    </ul>
  </div>
</main>

<!-- Chart Section -->
<section class="chart-section">
  <canvasjs-chart
    [options]="chartOptions"
    style="height: 300px; width: 100%;"
  ></canvasjs-chart>

  <button class="create-btn" style="margin-top: 20px;" (click)="generateChartData()">
    Refresh Graph
  </button>
</section>
